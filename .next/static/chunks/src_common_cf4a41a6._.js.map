{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///var/www/vigia-amaral-frontend/src/common/components/themeProvider.tsx"],"sourcesContent":["\"use client\"\n\nimport type * as React from \"react\"\nimport { createContext, useContext, useEffect, useState } from \"react\"\n\ntype Theme = \"dark\" | \"light\" | \"system\"\n\ntype ThemeProviderProps = {\n  children: React.ReactNode\n  defaultTheme?: Theme\n  storageKey?: string\n  attribute?: string\n  enableSystem?: boolean\n  disableTransitionOnChange?: boolean\n}\n\ntype ThemeProviderState = {\n  theme: Theme\n  setTheme: (theme: Theme) => void\n}\n\nconst ThemeProviderContext = createContext<ThemeProviderState | undefined>(undefined)\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"system\",\n  storageKey = \"oralsim-ui-theme\",\n  enableSystem = true,\n  disableTransitionOnChange = false,\n  ...props\n}: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(defaultTheme)\n\n  useEffect(() => {\n    const root = window.document.documentElement\n    const initialColorValue = root.style.getPropertyValue(\"--initial-color-mode\")\n\n    const savedTheme = localStorage.getItem(storageKey)\n    if (savedTheme) {\n      setTheme(savedTheme as Theme)\n    } else if (initialColorValue === \"dark\") {\n      setTheme(\"dark\")\n    } else if (initialColorValue === \"light\") {\n      setTheme(\"light\")\n    } else if (enableSystem) {\n      setTheme(\"system\")\n    }\n  }, [enableSystem, storageKey])\n\n  useEffect(() => {\n    const root = window.document.documentElement\n\n    if (disableTransitionOnChange) {\n      root.classList.add(\"disable-transitions\")\n      // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n      window.getComputedStyle(root).opacity\n    }\n\n    root.classList.remove(\"light\", \"dark\")\n\n    if (theme === \"system\") {\n      const systemTheme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\"\n      root.classList.add(systemTheme)\n      root.style.colorScheme = systemTheme\n    } else {\n      root.classList.add(theme)\n      root.style.colorScheme = theme\n    }\n\n    if (disableTransitionOnChange) {\n      setTimeout(() => {\n        root.classList.remove(\"disable-transitions\")\n      }, 0)\n    }\n  }, [theme, disableTransitionOnChange])\n\n  useEffect(() => {\n    if (theme !== \"system\") return\n\n    function handleSystemThemeChange(event: MediaQueryListEvent) {\n      const root = window.document.documentElement\n      const systemTheme = event.matches ? \"dark\" : \"light\"\n\n      root.classList.remove(\"light\", \"dark\")\n      root.classList.add(systemTheme)\n      root.style.colorScheme = systemTheme\n    }\n\n    const mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\")\n    mediaQuery.addEventListener(\"change\", handleSystemThemeChange)\n\n    return () => {\n      mediaQuery.removeEventListener(\"change\", handleSystemThemeChange)\n    }\n  }, [theme])\n\n  const value = {\n    theme,\n    setTheme: (newTheme: Theme) => {\n      localStorage.setItem(storageKey, newTheme)\n      setTheme(newTheme)\n    },\n  }\n\n  return (\n    <ThemeProviderContext.Provider value={value} {...props}>\n      {children}\n    </ThemeProviderContext.Provider>\n  )\n}\n\nexport const useTheme = (): ThemeProviderState => {\n  const context = useContext(ThemeProviderContext)\n\n  if (context === undefined) {\n    throw new Error(\"useTheme must be used within a ThemeProvider\")\n  }\n\n  return context\n}\n\nexport function ThemeScript() {\n  return (\n    <script\n      dangerouslySetInnerHTML={{\n        __html: `\n          (function() {\n            try {\n              const storageKey = \"vigia-theme\";\n              const theme = localStorage.getItem(storageKey);\n              const systemTheme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\";\n              \n              document.documentElement.style.setProperty(\"--initial-color-mode\", theme || systemTheme);\n              \n              if (theme === \"dark\" || (theme === \"system\" && systemTheme === \"dark\")) {\n                document.documentElement.classList.add(\"dark\");\n              }\n            } catch (e) {\n              console.error(\"Theme initialization failed:\", e);\n            }\n          })();\n        `,\n      }}\n    />\n  )\n}\n"],"names":[],"mappings":";;;;;;AAGA;;;AAHA;;AAqBA,MAAM,qCAAuB,CAAA,GAAA,4RAAA,CAAA,gBAAa,AAAD,EAAkC;AAEpE,SAAS,cAAc,EAC5B,QAAQ,EACR,eAAe,QAAQ,EACvB,aAAa,kBAAkB,EAC/B,eAAe,IAAI,EACnB,4BAA4B,KAAK,EACjC,GAAG,OACgB;;IACnB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAS;IAE1C,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;mCAAE;YACR,MAAM,OAAO,OAAO,QAAQ,CAAC,eAAe;YAC5C,MAAM,oBAAoB,KAAK,KAAK,CAAC,gBAAgB,CAAC;YAEtD,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,IAAI,YAAY;gBACd,SAAS;YACX,OAAO,IAAI,sBAAsB,QAAQ;gBACvC,SAAS;YACX,OAAO,IAAI,sBAAsB,SAAS;gBACxC,SAAS;YACX,OAAO,IAAI,cAAc;gBACvB,SAAS;YACX;QACF;kCAAG;QAAC;QAAc;KAAW;IAE7B,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;mCAAE;YACR,MAAM,OAAO,OAAO,QAAQ,CAAC,eAAe;YAE5C,IAAI,2BAA2B;gBAC7B,KAAK,SAAS,CAAC,GAAG,CAAC;gBACnB,oEAAoE;gBACpE,OAAO,gBAAgB,CAAC,MAAM,OAAO;YACvC;YAEA,KAAK,SAAS,CAAC,MAAM,CAAC,SAAS;YAE/B,IAAI,UAAU,UAAU;gBACtB,MAAM,cAAc,OAAO,UAAU,CAAC,gCAAgC,OAAO,GAAG,SAAS;gBACzF,KAAK,SAAS,CAAC,GAAG,CAAC;gBACnB,KAAK,KAAK,CAAC,WAAW,GAAG;YAC3B,OAAO;gBACL,KAAK,SAAS,CAAC,GAAG,CAAC;gBACnB,KAAK,KAAK,CAAC,WAAW,GAAG;YAC3B;YAEA,IAAI,2BAA2B;gBAC7B;+CAAW;wBACT,KAAK,SAAS,CAAC,MAAM,CAAC;oBACxB;8CAAG;YACL;QACF;kCAAG;QAAC;QAAO;KAA0B;IAErC,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;mCAAE;YACR,IAAI,UAAU,UAAU;YAExB,SAAS,wBAAwB,KAA0B;gBACzD,MAAM,OAAO,OAAO,QAAQ,CAAC,eAAe;gBAC5C,MAAM,cAAc,MAAM,OAAO,GAAG,SAAS;gBAE7C,KAAK,SAAS,CAAC,MAAM,CAAC,SAAS;gBAC/B,KAAK,SAAS,CAAC,GAAG,CAAC;gBACnB,KAAK,KAAK,CAAC,WAAW,GAAG;YAC3B;YAEA,MAAM,aAAa,OAAO,UAAU,CAAC;YACrC,WAAW,gBAAgB,CAAC,UAAU;YAEtC;2CAAO;oBACL,WAAW,mBAAmB,CAAC,UAAU;gBAC3C;;QACF;kCAAG;QAAC;KAAM;IAEV,MAAM,QAAQ;QACZ;QACA,UAAU,CAAC;YACT,aAAa,OAAO,CAAC,YAAY;YACjC,SAAS;QACX;IACF;IAEA,qBACE,4TAAC,qBAAqB,QAAQ;QAAC,OAAO;QAAQ,GAAG,KAAK;kBACnD;;;;;;AAGP;GAtFgB;KAAA;AAwFT,MAAM,WAAW;;IACtB,MAAM,UAAU,CAAA,GAAA,4RAAA,CAAA,aAAU,AAAD,EAAE;IAE3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT;IARa;AAUN,SAAS;IACd,qBACE,4TAAC;QACC,yBAAyB;YACvB,QAAQ,CAAC;;;;;;;;;;;;;;;;QAgBT,CAAC;QACH;;;;;;AAGN;MAxBgB","debugId":null}},
    {"offset": {"line": 159, "column": 0}, "map": {"version":3,"sources":["file:///var/www/vigia-amaral-frontend/src/common/providers/QueryClientProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport { QueryClient, QueryClientProvider as TanstackQueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport React, { useState } from 'react';\n\nexport const QueryClientProvider = ({ children }: { children: React.ReactNode }) => {\n  const [queryClient] = useState(() => new QueryClient({\n    defaultOptions: {\n      queries: {\n        staleTime: 1000 * 60 * 5, // 5 minutes\n        refetchOnWindowFocus: false,\n      },\n    },\n  }));\n\n  return (\n    <TanstackQueryClientProvider client={queryClient}>\n      {children}\n      <ReactQueryDevtools initialIsOpen={false} />\n    </TanstackQueryClientProvider>\n  );\n};\n"],"names":[],"mappings":";;;;AAEA;AAAA;AACA;AACA;;;AAJA;;;;AAMO,MAAM,sBAAsB,CAAC,EAAE,QAAQ,EAAiC;;IAC7E,MAAM,CAAC,YAAY,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD;wCAAE,IAAM,IAAI,yPAAA,CAAA,cAAW,CAAC;gBACnD,gBAAgB;oBACd,SAAS;wBACP,WAAW,OAAO,KAAK;wBACvB,sBAAsB;oBACxB;gBACF;YACF;;IAEA,qBACE,4TAAC,yRAAA,CAAA,sBAA2B;QAAC,QAAQ;;YAClC;0BACD,4TAAC,4WAAA,CAAA,qBAAkB;gBAAC,eAAe;;;;;;;;;;;;AAGzC;GAhBa;KAAA","debugId":null}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///var/www/vigia-amaral-frontend/src/common/services/api.service.ts"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000',\n});\n\n// Interceptor para adicionar o token de autenticação a cada requisição\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('accessToken');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Interceptor para lidar com erros (ex: token expirado)\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      // Token inválido ou expirado, desloga o usuário\n      localStorage.removeItem('accessToken');\n      window.location.href = '/login';\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport default api;"],"names":[],"mappings":";;;AAGW;AAHX;;AAEA,MAAM,MAAM,0LAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS,iEAAmC;AAC9C;AAEA,uEAAuE;AACvE,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAC1B,CAAC;IACC,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT,GACA,CAAC;IACC,OAAO,QAAQ,MAAM,CAAC;AACxB;AAGF,wDAAwD;AACxD,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAClC,gDAAgD;QAChD,aAAa,UAAU,CAAC;QACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa","debugId":null}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///var/www/vigia-amaral-frontend/src/common/providers/AuthProvider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { createContext, useState, useContext, useEffect, ReactNode } from 'react';\nimport { jwtDecode } from 'jwt-decode';\nimport api from '../services/api.service';\nimport { User } from '../interfaces/types';\n\ninterface AuthContextType {\n  user: User | null;\n  token: string | null;\n  login: (data: FormData) => Promise<void>;\n  logout: () => void;\n  isLoading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider = ({ children }: { children: ReactNode }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [token, setToken] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    const storedToken = localStorage.getItem('accessToken');\n    if (storedToken) {\n      try {\n        const decoded: { sub: string } = jwtDecode(storedToken);\n        // Em uma app real, você faria uma chamada a /auth/users/me para validar o token e obter dados do usuário\n        setUser({ email: decoded.sub, id: '', is_active: true }); // Mock user data from token\n        setToken(storedToken);\n      } catch (error) {\n        console.error(\"Invalid token:\", error);\n        localStorage.removeItem('accessToken');\n      }\n    }\n    setIsLoading(false);\n  }, []);\n\n  const login = async (data: FormData) => {\n    const response = await api.post('/auth/token', data);\n    const { access_token } = response.data;\n    localStorage.setItem('accessToken', access_token);\n    const decoded: { sub: string } = jwtDecode(access_token);\n    setUser({ email: decoded.sub, id: '', is_active: true }); // Mock user data from token\n    setToken(access_token);\n  };\n\n  const logout = () => {\n    localStorage.removeItem('accessToken');\n    setUser(null);\n    setToken(null);\n    window.location.href = '/login';\n  };\n\n  return (\n    <AuthContext.Provider value={{ user, token, login, logout, isLoading }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAeA,MAAM,4BAAc,CAAA,GAAA,4RAAA,CAAA,gBAAa,AAAD,EAA+B;AAExD,MAAM,eAAe,CAAC,EAAE,QAAQ,EAA2B;;IAChE,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAe;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAiB;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,4RAAA,CAAA,WAAQ,AAAD,EAAE;IAE3C,CAAA,GAAA,4RAAA,CAAA,YAAS,AAAD;kCAAE;YACR,MAAM,cAAc,aAAa,OAAO,CAAC;YACzC,IAAI,aAAa;gBACf,IAAI;oBACF,MAAM,UAA2B,CAAA,GAAA,mNAAA,CAAA,YAAS,AAAD,EAAE;oBAC3C,yGAAyG;oBACzG,QAAQ;wBAAE,OAAO,QAAQ,GAAG;wBAAE,IAAI;wBAAI,WAAW;oBAAK,IAAI,4BAA4B;oBACtF,SAAS;gBACX,EAAE,OAAO,OAAO;oBACd,QAAQ,KAAK,CAAC,kBAAkB;oBAChC,aAAa,UAAU,CAAC;gBAC1B;YACF;YACA,aAAa;QACf;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO;QACnB,MAAM,WAAW,MAAM,8IAAA,CAAA,UAAG,CAAC,IAAI,CAAC,eAAe;QAC/C,MAAM,EAAE,YAAY,EAAE,GAAG,SAAS,IAAI;QACtC,aAAa,OAAO,CAAC,eAAe;QACpC,MAAM,UAA2B,CAAA,GAAA,mNAAA,CAAA,YAAS,AAAD,EAAE;QAC3C,QAAQ;YAAE,OAAO,QAAQ,GAAG;YAAE,IAAI;YAAI,WAAW;QAAK,IAAI,4BAA4B;QACtF,SAAS;IACX;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,SAAS;QACT,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,qBACE,4TAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAO;YAAQ;QAAU;kBAClE;;;;;;AAGP;GA1Ca;KAAA;AA4CN,MAAM,UAAU;;IACrB,MAAM,UAAU,CAAA,GAAA,4RAAA,CAAA,aAAU,AAAD,EAAE;IAC3B,IAAI,YAAY,WAAW;QACzB,MAAM,IAAI,MAAM;IAClB;IACA,OAAO;AACT;IANa","debugId":null}}]
}